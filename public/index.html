<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="WrapMeApp - How to layer up and stay warm this winter!">
        <meta name="theme-color" content="#fafaf9" media="(prefers-color-scheme: light)">
        <meta name="theme-color" content="#1c1917" media="(prefers-color-scheme: dark)">
        
        
        <!-- Open Graph -->
        <meta property="og:title" content="WrapMeApp">
        <meta property="og:description" content="How to layer up and stay warm this winter!">
        <meta property="og:image" content="https://raw.githubusercontent.com/GuyCalloway/wrap-me-app/main/public/images/wrap-me-app.png">
        <meta property="og:image:width" content="612">
        <meta property="og:image:height" content="612">
        <meta property="og:url" content="https://winter-wrap.web.app/">
        <meta property="og:type" content="website">
        
        
        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="WrapMeApp">
        <meta name="twitter:description" content="How to layer up and stay warm this winter!">
        <meta name="twitter:image" content="https://raw.githubusercontent.com/GuyCalloway/wrap-me-app/main/public/images/wrap-me-app.png">
        
        
        <title>wrapMeApp</title>
        <link rel="stylesheet" href="/css/style.css?v=1.9.2">
        </head>
<body>
    <!-- LOGO HEADER -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo-images">
                <img src="/images/wrap-me-app.png" alt="WrapMeApp Logo" class="app-logo">
            </div>
            <h1 class="app-brand">wrap me app</h1>
        </div>
    </header>

    <div class="screen active" id="ageScreen">
        <h1 class="question">How old are you?</h1>
        <div class="options" data-selection="age">
            <button class="option" data-age="infant">0-2</button>
            <button class="option" data-age="child">3-12</button>
            <button class="option" data-age="teen">13-17</button>
            <button class="option" data-age="adult">18-64</button>
            <button class="option" data-age="elderly">65-80</button>
            <button class="option" data-age="very-elderly">80+</button>
        </div>
    </div>

    <div class="screen" id="genderScreen">
        <h1 class="question">Gender</h1>
        <div class="options" data-selection="gender">
            <button class="option" data-gender="male">Male</button>
            <button class="option" data-gender="female">Female</button>
        </div>
    </div>

    <div class="screen" id="tempScreen">
        <div id="profileDisplay" class="profile-display-large hidden">
            <span id="profileText"></span>
            <button class="profile-change-btn" id="changeProfileBtn" title="Change age/gender">Change</button>
        </div>

        <div class="location-section">
            <label for="addressInput" class="address-label">Enter your address or postcode</label>
            <div class="address-input-group">
                <input
                    type="text"
                    id="addressInput"
                    class="address-input"
                    placeholder="e.g. SW1A 1AA or London, UK"
                    aria-label="Address or postcode"
                >
                <button class="get-weather-btn-inline" id="getWeatherBtn">Enter</button>
                <button class="location-icon-btn" id="locationBtn" title="Use my current location">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C12 2 12 2 12 2C8.13401 2 5 5.13401 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13401 15.866 2 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="12" cy="9" r="2.5" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>
            <div class="weather-result hidden" id="weatherResult">
                <span id="weatherText"></span>
                <button class="change-location-btn hidden" id="changeLocationBtn" title="Change location">Change</button>
            </div>
        </div>

        <div class="location-divider">
            <span class="divider-text">or set manually</span>
        </div>

        <div class="temp-display">
            <span id="tempValue">10</span><span class="temp-unit">°C</span>
        </div>
        <input type="range" id="tempSlider" min="-10" max="20" value="10" step="0.5" aria-label="Temperature">

        <button class="continue-btn" id="continueBtn">Continue</button>
    </div>

    <div class="screen" id="loadingScreen">
        <div class="loading">Getting your recommendations...</div>
    </div>

    <div class="screen" id="resultsScreen">
        <div class="results-container">

            <div class="text-panel">
                <div class="weather-info">
                    <div class="current-temp">
                        <span id="resultTemp">5</span>°C
                        <button class="temp-change-btn" id="changeTempBtn" title="Change temperature">Edit</button>
                    </div>
                    <div class="alert-level" id="alertLevel">Yellow Alert</div>
                </div>

                <div class="user-profile-display">
                    <span id="displayGender">Adult Male</span> · <span id="displayAge">18-64</span>
                </div>

                <div class="warmth-indicator" id="warmthIndicator"></div>

                <div id="recommendations"></div>

                <div class="results-disclaimer">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="flex-shrink: 0;">
                        <path d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p>General guidance only. Not medical advice. If you have medical conditions affecting temperature regulation, consult your healthcare provider. <button class="disclaimer-link" id="disclaimerLink">Learn more</button></p>
                </div>

                <button class="restart-btn" id="restartBtn">Start Over</button>

            </div>
        </div>
    </div>

    <div id="substituteModal" class="substitute-modal">
        <div class="substitute-modal-content">
            <div class="substitute-modal-header">
                <h3 id="substituteModalTitle">Choose Alternative</h3>
                <button class="modal-close" id="substituteModalCloseBtn" aria-label="Close">&times;</button>
            </div>
            <div class="substitute-modal-body" id="substituteModalBody">
                <!-- Substitute options will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <div id="sourcesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About Our Recommendations</h2>
                <button class="modal-close" id="sourcesModalCloseBtn" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="medical-disclaimer">
                    <div class="disclaimer-icon">⚕️</div>
                    <div class="disclaimer-content">
                        <h3>Medical Disclaimer</h3>
                        <p><strong>This tool provides general guidance only and is not medical advice.</strong></p>
                        <p>If you have any medical conditions affecting your ability to regulate body temperature (including but not limited to diabetes, thyroid disorders, cardiovascular disease, peripheral vascular disease, Raynaud's disease, or are taking medications that affect circulation), please consult your healthcare provider for personalized advice about cold weather protection.</p>
                        <p>Pregnant women, individuals with reduced mobility, and those recovering from illness should also seek medical guidance.</p>
                        <p><strong>In case of cold-related emergencies (hypothermia, frostbite), seek immediate medical attention.</strong></p>
                    </div>
                </div>

                <section class="sources-section">
                    <h3>What is CLO?</h3>
                    <p>CLO (Clothing Insulation Unit) is a measure of thermal insulation provided by clothing. We use CLO values as a guide to help recommend appropriate clothing combinations. Our recommendations are approximate and may not reflect exact scientific measurements.</p>
                </section>

                <section class="sources-section">
                    <h3>Reference Standards</h3>
                    <p>Our recommendations are informed by the following standards, though values may be simplified or approximated:</p>
                    <div class="source-item">
                        <strong>ASHRAE Standard 55-2020</strong>
                        <p>Thermal Environmental Conditions for Human Occupancy. Reference for CLO values.</p>
                        <a href="https://www.ashrae.org/technical-resources/bookstore/standard-55-thermal-environmental-conditions-for-human-occupancy" target="_blank" rel="noopener">ashrae.org</a>
                    </div>
                    <div class="source-item">
                        <strong>ISO 9920:2007</strong>
                        <p>Ergonomics of the thermal environment — Reference for thermal insulation estimates.</p>
                        <a href="https://www.iso.org/standard/39257.html" target="_blank" rel="noopener">iso.org</a>
                    </div>
                </section>

                <section class="sources-section">
                    <h3>Medical & Public Health Guidelines</h3>
                    <div class="source-item">
                        <strong>UK Health Security Agency (UKHSA)</strong>
                        <p>Cold Weather Plan 2023. Temperature thresholds and health risk levels for vulnerable populations.</p>
                        <a href="https://www.gov.uk/government/publications/cold-weather-plan" target="_blank" rel="noopener">gov.uk</a>
                    </div>
                    <div class="source-item">
                        <strong>NHS Cold Weather Guidance</strong>
                        <p>Recommendations for staying warm and safe in cold weather, including clothing advice for all age groups.</p>
                        <a href="https://www.nhs.uk/live-well/seasonal-health/keep-warm-keep-well/" target="_blank" rel="noopener">nhs.uk</a>
                    </div>
                    <div class="source-item">
                        <strong>World Health Organization (WHO)</strong>
                        <p>Housing and health guidelines. Recommendations for indoor and outdoor temperature protection.</p>
                        <a href="https://www.who.int/publications/i/item/9789241550376" target="_blank" rel="noopener">who.int</a>
                    </div>
                </section>

                <section class="sources-section">
                    <h3>CLO Values for Clothing Items</h3>
                    <p>Individual garment CLO values are guided by published research, though simplified for practical use:</p>
                    <ul class="sources-list">
                        <li><strong>ASHRAE Handbook - Fundamentals (2021)</strong> - Chapter 9: Thermal Comfort</li>
                        <li><strong>ISO 9920 Tables</strong> - Reference insulation values for garments</li>
                        <li><strong>McCullough et al. (1985)</strong> - "A comprehensive data base for estimating clothing insulation"</li>
                        <li><strong>Havenith et al. (2015)</strong> - "Temperature and wind effects on clothing insulation"</li>
                    </ul>
                </section>

                <section class="sources-section">
                    <h3>Age & Gender Adjustments</h3>
                    <div class="source-item">
                        <strong>Gender Differences</strong>
                        <p>Women typically feel cold at temperatures ~3°C warmer than men due to differences in metabolic rate and body composition.</p>
                        <cite>Karjalainen, S. (2012). Thermal comfort and gender: a literature review. Indoor Air, 22(2), 96-109.</cite>
                    </div>
                    <div class="source-item">
                        <strong>Elderly Populations</strong>
                        <p>Reduced thermoregulation and lower metabolic rates require additional insulation.</p>
                        <cite>Blatteis, C. M. (2012). Age-dependent changes in temperature regulation. Gerontology, 58(4), 289-295.</cite>
                    </div>
                    <div class="source-item">
                        <strong>Infants & Children</strong>
                        <p>Higher surface area to body mass ratio results in faster heat loss.</p>
                        <cite>Sinclair, J. C. (1992). Management of the thermal environment. Neonatal-Perinatal Medicine, 5, 927-945.</cite>
                    </div>
                </section>

                <section class="sources-section">
                    <h3>How It Works</h3>
                    <p>Our recommendation engine uses CLO values as a guide to suggest practical clothing combinations for different temperatures. The algorithm balances warmth, wearability, and common sense, though it may not always match exact scientific calculations.</p>
                </section>

                <div class="sources-footer">
                    <p><strong>Last Updated:</strong> November 2024</p>
                    <p><strong>Important:</strong> All recommendations are approximate guides only. CLO values are simplified and may not reflect exact scientific measurements. Individual comfort varies based on activity level, metabolism, wind exposure, humidity, and personal preference.</p>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/js/app.js?v=1.9.2"></script>
</body>
</html>
